{"ast":null,"code":"import mysql from 'mysql2/promise';\nexport async function connectToDatabase() {\n  const connection = await mysql.createConnection({\n    host: 'localhost',\n    user: 'root',\n    password: '',\n    database: 'Next'\n  });\n  return connection;\n}\nexport async function storeMeetups(req, res) {\n  if (req.method === 'POST') {\n    try {\n      const connection = await connectToDatabase();\n      const data = req.body;\n      const {\n        title,\n        image,\n        address,\n        description\n      } = data; // Insert data into the meetups table\n\n      const [result] = await connection.execute('INSERT INTO meetups (title, image, address, description) VALUES (?, ?, ?, ?)', [title, image, address, description]); // Return the newly inserted meetup ID\n\n      res.status(201).json({\n        meetupId: result.id\n      });\n    } catch (error) {\n      console.error('Error storing meetup:', error);\n      res.status(500).json({\n        error: 'Internal Server Error'\n      });\n    }\n  } else {\n    res.status(405).json({\n      error: 'Method Not Allowed'\n    });\n  }\n}","map":{"version":3,"sources":["/Users/bilalahmad/Downloads/06-onwards-to-a-bigger-project-starting-project/pages/api/new-meetup.js"],"names":["mysql","connectToDatabase","connection","createConnection","host","user","password","database","storeMeetups","req","res","method","data","body","title","image","address","description","result","execute","status","json","meetupId","id","error","console"],"mappings":"AAIA,OAAOA,KAAP,MAAkB,gBAAlB;AAEA,OAAO,eAAeC,iBAAf,GAAmC;AACxC,QAAMC,UAAU,GAAG,MAAMF,KAAK,CAACG,gBAAN,CAAuB;AAC9CC,IAAAA,IAAI,EAAE,WADwC;AAE9CC,IAAAA,IAAI,EAAE,MAFwC;AAG9CC,IAAAA,QAAQ,EAAE,EAHoC;AAI9CC,IAAAA,QAAQ,EAAE;AAJoC,GAAvB,CAAzB;AAOA,SAAOL,UAAP;AACD;AAGD,OAAO,eAAeM,YAAf,CAA4BC,GAA5B,EAAiCC,GAAjC,EAAsC;AACzC,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB,QAAI;AACF,YAAMT,UAAU,GAAG,MAAMD,iBAAiB,EAA1C;AACA,YAAMW,IAAI,GAAGH,GAAG,CAACI,IAAjB;AACA,YAAM;AAAEC,QAAAA,KAAF;AAASC,QAAAA,KAAT;AAAgBC,QAAAA,OAAhB;AAAyBC,QAAAA;AAAzB,UAAyCL,IAA/C,CAHE,CAKF;;AACA,YAAM,CAACM,MAAD,IAAW,MAAMhB,UAAU,CAACiB,OAAX,CACrB,8EADqB,EAErB,CAACL,KAAD,EAAQC,KAAR,EAAeC,OAAf,EAAwBC,WAAxB,CAFqB,CAAvB,CANE,CAWF;;AACAP,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,QAAQ,EAAEJ,MAAM,CAACK;AAAnB,OAArB;AACD,KAbD,CAaE,OAAOC,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAc,uBAAd,EAAuCA,KAAvC;AACAd,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEG,QAAAA,KAAK,EAAE;AAAT,OAArB;AACD;AACF,GAlBD,MAkBO;AACLd,IAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEG,MAAAA,KAAK,EAAE;AAAT,KAArB;AACD;AACF","sourcesContent":["\n\n\n\nimport mysql from 'mysql2/promise';\n\nexport async function connectToDatabase() {\n  const connection = await mysql.createConnection({\n    host: 'localhost',\n    user: 'root',\n    password: '',\n    database: 'Next',\n  });\n\n  return connection;\n}\n\n\nexport async function storeMeetups(req, res) {\n    if (req.method === 'POST') {\n      try {\n        const connection = await connectToDatabase();\n        const data = req.body;\n        const { title, image, address, description } = data;\n  \n        // Insert data into the meetups table\n        const [result] = await connection.execute(\n          'INSERT INTO meetups (title, image, address, description) VALUES (?, ?, ?, ?)',\n          [title, image, address, description]\n        );\n  \n        // Return the newly inserted meetup ID\n        res.status(201).json({ meetupId: result.id });\n      } catch (error) {\n        console.error('Error storing meetup:', error);\n        res.status(500).json({ error: 'Internal Server Error' });\n      }\n    } else {\n      res.status(405).json({ error: 'Method Not Allowed' });\n    }\n  }"]},"metadata":{},"sourceType":"module"}